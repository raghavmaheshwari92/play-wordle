<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wordle Game - Fixed</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>WORDLE</h1>
            <div id="timer" class="timer">00:00</div>
        </header>

        <div id="message" class="message"></div>

        <div id="game-board" class="game-board">
            <!-- 6 rows x 5 columns grid will be generated by JavaScript -->
        </div>

        <div id="keyboard" class="keyboard">
            <div class="keyboard-row">
                <button class="key" data-key="Q">Q</button>
                <button class="key" data-key="W">W</button>
                <button class="key" data-key="E">E</button>
                <button class="key" data-key="R">R</button>
                <button class="key" data-key="T">T</button>
                <button class="key" data-key="Y">Y</button>
                <button class="key" data-key="U">U</button>
                <button class="key" data-key="I">I</button>
                <button class="key" data-key="O">O</button>
                <button class="key" data-key="P">P</button>
            </div>
            <div class="keyboard-row">
                <button class="key" data-key="A">A</button>
                <button class="key" data-key="S">S</button>
                <button class="key" data-key="D">D</button>
                <button class="key" data-key="F">F</button>
                <button class="key" data-key="G">G</button>
                <button class="key" data-key="H">H</button>
                <button class="key" data-key="J">J</button>
                <button class="key" data-key="K">K</button>
                <button class="key" data-key="L">L</button>
            </div>
            <div class="keyboard-row">
                <button class="key key-wide" data-key="ENTER">ENTER</button>
                <button class="key" data-key="Z">Z</button>
                <button class="key" data-key="X">X</button>
                <button class="key" data-key="C">C</button>
                <button class="key" data-key="V">V</button>
                <button class="key" data-key="B">B</button>
                <button class="key" data-key="N">N</button>
                <button class="key" data-key="M">M</button>
                <button class="key key-wide" data-key="BACKSPACE">âŒ«</button>
            </div>
        </div>

        <button id="new-game" class="new-game-btn">New Game</button>
    </div>

    <script>
        const WORD_LENGTH = 5;
        const MAX_GUESSES = 6;
        const WORDS = ['ABOUT', 'ABOVE', 'ABUSE', 'ACTOR', 'ACUTE', 'ADMIT', 'ADOPT', 'ADULT', 'AFTER', 'AGAIN', 'AGENT', 'AGREE', 'AHEAD', 'ALARM', 'ALBUM', 'ALERT', 'ALIKE', 'ALIVE', 'ALLOW', 'ALONE', 'ALONG', 'ALTER', 'ANGEL', 'ANGER', 'ANGLE', 'ANGRY', 'APART', 'APPLE', 'APPLY', 'ARENA', 'ARGUE', 'ARISE', 'ARRAY', 'ASIDE', 'ASSET', 'AVOID', 'AWARD', 'AWARE', 'BADLY', 'BAKER', 'BASES', 'BASIC', 'BASIN', 'BEACH', 'BEGAN', 'BEING', 'BELOW', 'BENCH', 'BILLY', 'BIRTH', 'BLACK', 'BLAME', 'BLIND', 'BLOCK', 'BLOOD', 'BOARD', 'BOOST', 'BOOTH', 'BOUND', 'BRAIN', 'BRAND', 'BREAD', 'BREAK', 'BREED', 'BRIEF', 'BRING', 'BROAD', 'BROKE', 'BROWN', 'BUILD', 'BUILT', 'BUYER', 'CABLE', 'CALIF', 'CARRY', 'CATCH', 'CAUSE', 'CHAIN', 'CHAIR', 'CHAOS', 'CHARM', 'CHART', 'CHASE', 'CHEAP', 'CHECK', 'CHEST', 'CHIEF', 'CHILD', 'CHINA', 'CHOSE', 'CIVIL', 'CLAIM', 'CLASS', 'CLEAN', 'CLEAR', 'CLICK', 'CLIFF', 'CLIMB', 'CLOCK', 'CLOSE', 'CLOUD', 'COACH', 'COAST', 'COULD', 'COUNT', 'COURT', 'COVER', 'CRAFT', 'CRASH', 'CRAZY', 'CREAM', 'CRIME', 'CRISP', 'CROSS', 'CROWD', 'CROWN', 'CRUDE', 'CURVE', 'CYCLE', 'DAILY', 'DANCE', 'DATED', 'DEALT', 'DEATH', 'DEBUT', 'DELAY', 'DELTA', 'DENSE', 'DEPOT', 'DEPTH', 'DOING', 'DOUBT', 'DOZEN', 'DRAFT', 'DRAMA', 'DRANK', 'DRAWN', 'DREAM', 'DRESS', 'DRIED', 'DRILL', 'DRINK', 'DRIVE', 'DROVE', 'DYING', 'EAGER', 'EARLY', 'EARTH', 'EIGHT', 'EIGHT', 'ELITE', 'EMPTY', 'ENEMY', 'ENJOY', 'ENTER', 'ENTRY', 'EQUAL', 'ERROR', 'EVENT', 'EVERY', 'EXACT', 'EXIST', 'EXTRA', 'FAITH', 'FALSE', 'FAULT', 'FENCE', 'FIBER', 'FIELD', 'FIERY', 'FIFTH', 'FIFTY', 'FIGHT', 'FINAL', 'FIRST', 'FIXED', 'FLASH', 'FLEET', 'FLIGHT', 'FLOAT', 'FLOOD', 'FLOOR', 'FLOWN', 'FLUID', 'FLUNG', 'FOCAL', 'FOCUS', 'FORCE', 'FORTH', 'FORTY', 'FORUM', 'FOUND', 'FRAME', 'FRANK', 'FRAUD', 'FRESH', 'FRONT', 'FRUIT', 'FULLY', 'FUNNY', 'GIANT', 'GIVEN', 'GLASS', 'GLOBE', 'GOING', 'GRACE', 'GRADE', 'GRAIN', 'GRAND', 'GRANT', 'GRAPE', 'GRAPH', 'GRASP', 'GRASS', 'GRAVE', 'GREAT', 'GREEN', 'GRIND', 'GROSS', 'GROUP', 'GROWN', 'GUARD', 'GUESS', 'GUEST', 'GUIDE', 'GUILT', 'HABIT', 'HAPPY', 'HARSH', 'HASTE', 'HEART', 'HEAVY', 'HEDGE', 'HELLO', 'HENRY', 'HENCE', 'HINGE', 'HIRED', 'HOBBY', 'HOIST', 'HORSE', 'HOTEL', 'HOURS', 'HOUSE', 'HUMAN', 'IDEAL', 'IMAGE', 'IMPLY', 'INDEX', 'INNER', 'INPUT', 'INTER', 'INTRO', 'ISSUE', 'JOINT', 'JUDGE', 'KNOWN', 'LABEL', 'LARGE', 'LASER', 'LATER', 'LAUGH', 'LAYER', 'LEARN', 'LEASE', 'LEAST', 'LEAVE', 'LEGAL', 'LEMON', 'LEVEL', 'LEVER', 'LEWIS', 'LIGHT', 'LIMIT', 'LINKS', 'LIVES', 'LOCAL', 'LOGIC', 'LOOSE', 'LOWER', 'LUCKY', 'LUNCH', 'LYING', 'MAGIC', 'MAJOR', 'MAKER', 'MARCH', 'MARIA', 'MATCH', 'MAYBE', 'MAYOR', 'MEANT', 'MEDIA', 'METAL', 'MIGHT', 'MINOR', 'MINUS', 'MIXED', 'MODEL', 'MONEY', 'MONTH', 'MORAL', 'MOTOR', 'MOUNT', 'MOUSE', 'MOUTH', 'MOVED', 'MUSIC', 'NEEDS', 'NEVER', 'NEWLY', 'NIGHT', 'NOISE', 'NORTH', 'NOTED', 'NOVEL', 'NURSE', 'OCCUR', 'OCEAN', 'OFFER', 'OFTEN', 'ORDER', 'OTHER', 'OUGHT', 'OUTER', 'OWNER', 'PAINT', 'PANEL', 'PAPER', 'PARIS', 'PARTY', 'PEACE', 'PETER', 'PHASE', 'PHONE', 'PHOTO', 'PIANO', 'PIECE', 'PILOT', 'PITCH', 'PLACE', 'PLAIN', 'PLANE', 'PLANT', 'PLATE', 'PLAZA', 'POINT', 'POUND', 'POWER', 'PRESS', 'PRICE', 'PRIDE', 'PRIME', 'PRINT', 'PRIOR', 'PRIZE', 'PROOF', 'PROUD', 'PROVE', 'QUEEN', 'QUICK', 'QUIET', 'QUITE', 'RADIO', 'RAISE', 'RANGE', 'RAPID', 'REACH', 'REALM', 'REBEL', 'REFER', 'RELAX', 'REPLY', 'RIDER', 'RIDGE', 'RIFLE', 'RIGHT', 'RIGID', 'RIVER', 'ROBIN', 'ROCKY', 'ROGER', 'ROMAN', 'ROAST', 'ROUGH', 'ROUND', 'ROUTE', 'ROYAL', 'RURAL', 'SCALE', 'SCENE', 'SCOPE', 'SCORE', 'SENSE', 'SERVE', 'SEVEN', 'SHALL', 'SHAPE', 'SHARE', 'SHARP', 'SHEAR', 'SHEER', 'SHEET', 'SHELF', 'SHELL', 'SHIFT', 'SHINE', 'SHIRT', 'SHOCK', 'SHOOT', 'SHORE', 'SHORT', 'SHOWN', 'SIGHT', 'SILLY', 'SIMON', 'SINCE', 'SIXTH', 'SIXTY', 'SIZED', 'SKILL', 'SLASH', 'SLEEP', 'SLEPT', 'SLICE', 'SLIDE', 'SLING', 'SLOPE', 'SMALL', 'SMART', 'SMILE', 'SMITH', 'SMOKE', 'SNACK', 'SNAKE', 'SOLID', 'SOLVE', 'SORRY', 'SOUND', 'SOUTH', 'SPACE', 'SPARE', 'SPARK', 'SPEAK', 'SPEED', 'SPEND', 'SPENT', 'SPIKE', 'SPILL', 'SPINE', 'SPLIT', 'SPOKE', 'SPORT', 'SPRAY', 'SQUAD', 'STACK', 'STAFF', 'STAGE', 'STAKE', 'STAND', 'START', 'STATE', 'STEAK', 'STEAL', 'STEAM', 'STEEL', 'STEEP', 'STEER', 'STICK', 'STILL', 'STOCK', 'STOIC', 'STONE', 'STOOD', 'STOOL', 'STORE', 'STORM', 'STORY', 'STOVE', 'STRAP', 'STRIP', 'STUCK', 'STUDY', 'STUFF', 'STYLE', 'SUGAR', 'SUITE', 'SUPER', 'SURGE', 'SWEAR', 'SWEAT', 'SWEET', 'SWELL', 'SWEPT', 'SWIFT', 'SWING', 'SWIRL', 'SWORD', 'TABLE', 'TAKEN', 'TASTE', 'TAXES', 'TEACH', 'TEAMS', 'TENTH', 'TERRY', 'TEXAS', 'THANK', 'THEFT', 'THEIR', 'THEME', 'THERE', 'THESE', 'THICK', 'THING', 'THINK', 'THIRD', 'THOSE', 'THREE', 'THREW', 'THROW', 'THUMB', 'TIGHT', 'TIMER', 'TITLE', 'TODAY', 'TOPIC', 'TOTAL', 'TOUCH', 'TOUGH', 'TOWER', 'TRACK', 'TRADE', 'TRAIL', 'TRAIN', 'TRASH', 'TREAT', 'TREND', 'TRIAL', 'TRIBE', 'TRICK', 'TRIED', 'TRIES', 'TROOP', 'TRUCK', 'TRULY', 'TRUMP', 'TRUNK', 'TRUST', 'TRUTH', 'TWICE', 'TWINS', 'UNCLE', 'UNDER', 'UNDUE', 'UNION', 'UNITY', 'UNTIL', 'UPPER', 'UPSET', 'URBAN', 'USAGE', 'USUAL', 'VALID', 'VALUE', 'VIDEO', 'VIRUS', 'VISIT', 'VITAL', 'VOCAL', 'VOICE', 'VOTER', 'WAGON', 'WASTE', 'WATCH', 'WATER', 'WEARY', 'WEBER', 'WHEEL', 'WHERE', 'WHICH', 'WHILE', 'WHITE', 'WHOLE', 'WHOSE', 'WIDER', 'WOMAN', 'WOMEN', 'WORLD', 'WORRY', 'WORSE', 'WORST', 'WORTH', 'WOULD', 'WOUND', 'WRITE', 'WRONG', 'WROTE', 'YIELD', 'YOUNG', 'YOURS', 'YOUTH', 'ZEBRA', 'ZONES'];

        let targetWord = '';
        let currentRow = 0;
        let currentTile = 0;
        let isGameOver = false;
        let guesses = [];

        function initializeGame() {
            targetWord = WORDS[Math.floor(Math.random() * WORDS.length)];
            currentRow = 0;
            currentTile = 0;
            isGameOver = false;
            guesses = [];

            const gameBoard = document.getElementById('game-board');
            gameBoard.innerHTML = '';

            for (let i = 0; i < MAX_GUESSES; i++) {
                const row = document.createElement('div');
                row.classList.add('row');
                row.setAttribute('id', `row-${i}`);

                for (let j = 0; j < WORD_LENGTH; j++) {
                    const tile = document.createElement('div');
                    tile.classList.add('tile');
                    tile.setAttribute('id', `row-${i}-tile-${j}`);
                    row.appendChild(tile);
                }

                gameBoard.appendChild(row);
            }

            clearKeyboardColors();
            showMessage('');
        }

        function clearKeyboardColors() {
            const keys = document.querySelectorAll('.key');
            keys.forEach(key => {
                key.classList.remove('correct', 'present', 'absent');
            });
        }

        function handleKeyPress(letter) {
            if (isGameOver) return;

            if (letter === 'BACKSPACE') {
                deleteLetter();
            } else if (letter === 'ENTER') {
                submitGuess();
            } else if (currentTile < WORD_LENGTH) {
                addLetter(letter);
            }
        }

        function addLetter(letter) {
            if (currentTile < WORD_LENGTH && currentRow < MAX_GUESSES) {
                const tile = document.getElementById(`row-${currentRow}-tile-${currentTile}`);
                tile.textContent = letter;
                tile.classList.add('filled');
                currentTile++;
            }
        }

        function deleteLetter() {
            if (currentTile > 0) {
                currentTile--;
                const tile = document.getElementById(`row-${currentRow}-tile-${currentTile}`);
                tile.textContent = '';
                tile.classList.remove('filled');
            }
        }

        function submitGuess() {
            if (currentTile !== WORD_LENGTH) {
                showMessage('TESTING: Need all 5 letters!');
                shakeRow();
                return;
            }

            const guess = getCurrentGuess();

            if (!WORDS.includes(guess)) {
                showMessage('Not in word list');
                shakeRow();
                return;
            }

            const result = checkGuess(guess);
            guesses.push(guess);
            updateBoard(result);
            updateKeyboard(guess, result);

            if (guess === targetWord) {
                isGameOver = true;
                showMessage('You won!');
            } else if (currentRow === MAX_GUESSES - 1) {
                isGameOver = true;
                showMessage(targetWord);
            } else {
                currentRow++;
                currentTile = 0;
            }
        }

        function getCurrentGuess() {
            let guess = '';
            for (let i = 0; i < WORD_LENGTH; i++) {
                const tile = document.getElementById(`row-${currentRow}-tile-${i}`);
                guess += tile.textContent;
            }
            return guess;
        }

        function checkGuess(guess) {
            const result = [];
            const targetArray = targetWord.split('');
            const guessArray = guess.split('');

            for (let i = 0; i < WORD_LENGTH; i++) {
                if (guessArray[i] === targetArray[i]) {
                    result[i] = 'correct';
                    targetArray[i] = null;
                }
            }

            for (let i = 0; i < WORD_LENGTH; i++) {
                if (result[i]) continue;

                const index = targetArray.indexOf(guessArray[i]);
                if (index > -1) {
                    result[i] = 'present';
                    targetArray[index] = null;
                } else {
                    result[i] = 'absent';
                }
            }

            return result;
        }

        function updateBoard(result) {
            for (let i = 0; i < WORD_LENGTH; i++) {
                const tile = document.getElementById(`row-${currentRow}-tile-${i}`);
                setTimeout(() => {
                    tile.classList.add(result[i]);
                }, i * 100);
            }
        }

        function updateKeyboard(guess, result) {
            for (let i = 0; i < WORD_LENGTH; i++) {
                const letter = guess[i];
                const key = document.querySelector(`[data-key="${letter}"]`);

                setTimeout(() => {
                    if (result[i] === 'correct') {
                        key.classList.remove('present', 'absent');
                        key.classList.add('correct');
                    } else if (result[i] === 'present' && !key.classList.contains('correct')) {
                        key.classList.remove('absent');
                        key.classList.add('present');
                    } else if (result[i] === 'absent' && !key.classList.contains('correct') && !key.classList.contains('present')) {
                        key.classList.add('absent');
                    }
                }, WORD_LENGTH * 100);
            }
        }

        function shakeRow() {
            const row = document.getElementById(`row-${currentRow}`);
            row.classList.add('shake');
            setTimeout(() => {
                row.classList.remove('shake');
            }, 500);
        }

        function showMessage(text) {
            const messageEl = document.getElementById('message');
            messageEl.textContent = text;
        }

        document.addEventListener('DOMContentLoaded', () => {
            initializeGame();

            document.addEventListener('keydown', (e) => {
                if (e.key === 'Enter') {
                    handleKeyPress('ENTER');
                } else if (e.key === 'Backspace') {
                    handleKeyPress('BACKSPACE');
                } else if (e.key.length === 1 && e.key.match(/[a-z]/i)) {
                    handleKeyPress(e.key.toUpperCase());
                }
            });

            document.querySelectorAll('.key').forEach(key => {
                key.addEventListener('click', () => {
                    handleKeyPress(key.getAttribute('data-key'));
                });
            });

            document.getElementById('new-game').addEventListener('click', initializeGame);
        });
    </script>
</body>
</html>